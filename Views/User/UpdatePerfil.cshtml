@using Microsoft.AspNetCore.Identity
@using Microsoft.AspNetCore.Identity.EntityFrameworkCore

@{
    ViewData["Title"] = "UpdatePerfil";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@inject UserManager<User>  UserManager

    <div class="container">

        @Html.ActionLink("Voltar", "Index", "User", null, new { @class = "btn btn-link" })
        @Html.ActionLink("Adicionar perfil ao usuáro", "AddRole", "User", new { @id = ViewBag.Id }, new { @class = "btn btn-link" })

        @if (ViewBag.roleError != null)
        {
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <strong>Ops</strong> @ViewBag.roleError
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        }

        <table class="table table-hover table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th class="text-center">Nome</th>
                    <th class="text-center">Ações</th>
                </tr>
            </thead>
            <tbody>
                @if (ViewBag.roles != null)
                {
                    foreach (String role in ViewBag.roles)
                    {
                        <tr>
                            <td class="text-center">@role </td>
                            <td class="text-center">
                                @if (!role.Equals("Admin"))
                                {
                                    @Html.ActionLink("Remover Perfil", "DeleteRoleInUser", "User", new { userId = ViewBag.Id, roleName = role }, new { @class = "btn btn-link" })
                                }
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>

